<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computation Graph</title>

    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <link href="https://unpkg.com/vis-network/styles/vis-network.min.css" rel="stylesheet" type="text/css" />

    <style>
        :root {
            --clr-border: #ced4da;
            --clr-info-bg: #f8f9fa;
            --radius: 10px;
        }
        body {
            margin: 0;
            font-family: "Rubik", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #ffffff;
            padding: 16px;
        }

        h1.title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #212529;
            margin-bottom: 16px;
        }

        #mynetwork {
            width: 100%;
            height: 70vh;
            border: 1px solid var(--clr-border);
            border-radius: var(--radius);
            box-shadow: 0 4px 14px rgba(0,0,0,.06);
        }

        #node-info {
            margin-top: 14px;
            padding: 14px;
            font-size: 0.95rem;
            background: var(--clr-info-bg);
            border: 1px solid #adb5bd;
            border-radius: var(--radius);
            width: 100%;
        }

        footer {
            text-align: center;
            margin-top: 24px;
            font-size: 0.9rem;
            color: #6c757d;
        }
    </style>
</head>
<body>
<h1 class="title">Advanced Programming Computational Graph</h1>

<div id="mynetwork"></div>
<div id="node-info">Click on a node to see its equation.</div>

<footer>Created by Roey Amitay &amp; Adir Dangoor</footer>

<script type="text/javascript">
    try {
        // Create nodes and edges from placeholders
        var nodes = new vis.DataSet(/* NODES_PLACEHOLDER */);
        var edges = new vis.DataSet(/* EDGES_PLACEHOLDER */);

        // Create the network
        var container = document.getElementById('mynetwork');
        var data = {
            nodes: nodes,
            edges: edges
        };
        var options = {
            layout: {
                hierarchical: {
                    direction: 'LR',
                    sortMethod: 'directed',
                    levelSeparation: 200,
                    nodeSpacing: 150,
                    treeSpacing: 200
                }
            },
            physics: false,
            nodes: {
                font: { size: 16, face: 'arial' },
                borderWidth: 2,
                shadow: true,
                size: 30
            },
            edges: {
                width: 2,
                shadow: true,
                smooth: {
                    type: 'cubicBezier',
                    forceDirection: 'horizontal'
                },
                arrows: 'to'
            }
        };

        var network = new vis.Network(container, data, options);
        network.on('stabilizationIterationsDone', function() {
            console.log('Network stabilized');
        });

        network.on('click', props => {
            const n = props.nodes[0];
            const infoBox = document.getElementById('node-info');
            if (n) {
                const node = nodes.get(n);
                infoBox.textContent = node.equation ? `Node Equation: ${node.equation}` : 'Click on a node to see its equation.';
            } else {
                infoBox.textContent = 'Click on a node to see its equation.';
            }
        });
    } catch (e) {
        console.error('Error in graph generation:', e);
    }
</script>
</body>
</html>